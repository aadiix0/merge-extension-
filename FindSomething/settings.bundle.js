(()=>{var e={815:function(e,t){var n,r,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],n=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",g=(e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((s,a)=>{if(t.fallbackToNoCallback)try{n[e](...r,o({resolve:s,reject:a},t))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(n[e](...r),s()):n[e](...r,o({resolve:s,reject:a},t))})},i=(e,t,n)=>new Proxy(t,{apply:(t,r,s)=>n.call(r,e,...s)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const m=(e,t={},n={})=>{let r=Object.create(null),s={has:(t,n)=>n in e||n in r,get(s,o,a){if(o in r)return r[o];if(!(o in e))return;let c=e[o];if("function"==typeof c)if("function"==typeof t[o])c=i(e,e[o],t[o]);else if(l(n,o)){let t=g(o,n[o]);c=i(e,e[o],t)}else c=c.bind(e);else if("object"==typeof c&&null!==c&&(l(t,o)||l(n,o)))c=m(c,t[o],n[o]);else{if(!l(n,"*"))return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(t){e[o]=t}}),c;c=m(c,t[o],n["*"])}return r[o]=c,c},set:(t,n,s,o)=>(n in r?r[n]=s:e[n]=s,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},o=Object.create(e);return new Proxy(o,s)},c=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),A=new r(e=>"function"!=typeof e?e:function(t){const n=m(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)}),d=new r(e=>"function"!=typeof e?e:function(t,n,r){let o,a,g=!1,i=new Promise(e=>{o=function(t){g=!0,e(t)}});try{a=e(t,n,o)}catch(e){a=Promise.reject(e)}const l=!0!==a&&s(a);if(!0!==a&&!l&&!g)return!1;const m=e=>{e.then(e=>{r(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return m(l?a:i),!0}),u=({reject:n,resolve:r},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?n(new Error(s.message)):r(s)},p=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((e,t)=>{const s=u.bind(null,{resolve:e,reject:t});r.push(s),n.sendMessage(...r)})},f={devtools:{network:{onRequestFinished:c(A)}},runtime:{onMessage:c(d),onMessageExternal:c(d),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},m(e,f,n)};e.exports=n(chrome)}},void 0===(s="function"==typeof n?n.apply(t,r):n)||(e.exports=s)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(815),t=n.n(e);const r={leftColumn:[{id:"ip",name:"popupIp",priority:1},{id:"ip_port",name:"popupIpPort",priority:2},{id:"domain",name:"popupDomain",priority:3},{id:"mail",name:"popupMail",priority:4},{id:"mobile",name:"popupMobile",priority:5},{id:"sfz",name:"popupSfz",priority:6},{id:"jwt",name:"popupJwt",priority:7},{id:"algorithm",name:"popupAlgorithm",priority:8},{id:"secret",name:"popupSecret",priority:9}],rightColumn:[{id:"analyze",name:"popupAnalyze",priority:1},{id:"path",name:"popupPath",priority:2},{id:"incomplete_path",name:"popupIncompletePath",priority:3},{id:"url",name:"popupUrl",priority:4},{id:"static",name:"popupStaticPath",priority:5}]},s={AIbaseURL:"https://ark.cn-beijing.volces.com/api/v3/chat",AIapiKey:"",AImodel:"doubao-1-5-lite-32k-250115",AISystemPrompt:'你将扮演一个js解释器，我将给你一段js代码和一个url，这段代码应该是用来动态生成完整js路径的，你需要帮我理解这段代码，推理出该函数可以生成的全部js文件名和相对路径，js文件名需要以.js结尾，相对路径需要以http开头。相对路径仅输出一次就可以，因为他们都是同一目录级别下的文件。\n推理要求：\n1、假设需要还原的js文件名与我给你的url同目录，根据还原的js示例的文件名，判断示例文件名在代码中的形式，推理出js文件所在的相对路径。\n2、如果函数中的字典key很多，那么你可以通过枚举key作为入参，从而推理出全部js文件名。\n输出格式要求：\n1、先输出还原出来的js文件名，然后输出相对路径，最后一行输出ok或error表示还原成功或无法还原。\n2、输出js文件名时每行一条。\n3、不要输出js文件名、相对路径和还原状态之外的任何内容，如果代码不是用来生成js路径的，那么仅输出error。\n4、最后一行一定要输出状态码，在ok或error中选一个。\n示例如下：\n输入：\nfunction(e){return n.p+""+{6:"a0c1a83"}[e]+".js"} 和 http://www.example.com/artifact/artifact-xxx/1750771666/04695da.js\n推理过程：\n根据代码还原出的js路径是a0c1a83.js，根据给到的url，推测js文件名在url中属于最后一部分04695da.js的位置，那么相对路径是http://www.example.com/artifact/artifact-xxx/1750771666/。\n输出:\na0c1a83.js\nhttp://www.example.com/artifact/artifact-xxx/1750771666/\nok',AIUserPrompt:"将这段动态加载代码还原为Js路径，输出结果一行一个。给你的url：{url}。"};function o(e){document.getElementById(e).textContent=t().i18n.getMessage(e)}function a(){t().storage.local.get(["layout_config"]).then(e=>e.layout_config||r).then(e=>{g(e),function(){const e=document.querySelectorAll(".layout-item"),t=document.querySelectorAll(".layout-items");e.forEach(e=>{e.addEventListener("dragstart",l),e.addEventListener("dragend",m)}),t.forEach(e=>{e.addEventListener("dragover",c),e.addEventListener("drop",u),e.addEventListener("dragenter",A),e.addEventListener("dragleave",d)})}()}),document.getElementById("save-layout").onclick=p,document.getElementById("reset-layout").onclick=f}function g(e){const t=document.getElementById("left-layout-items"),n=document.getElementById("right-layout-items");t.innerHTML="",n.innerHTML="",e.leftColumn.forEach((n,r)=>{const s=i(n,r,e);t.appendChild(s)}),e.rightColumn.forEach((t,r)=>{const s=i(t,r,e);n.appendChild(s)})}function i(e,n,r){const s=document.createElement("div");s.className="layout-item",s.draggable=!0,s.dataset.id=e.id,s.dataset.name=e.name,s.dataset.column=r.rightColumn.some(t=>t.id===e.id)?"right":"left";const o=t().i18n.getMessage(e.name)||e.id,a=t().i18n.getMessage("settingLayoutPriority")||"优先级";return s.innerHTML=`\n        <span class="drag-handle">⋮⋮</span>\n        <span class="item-name">${o}</span>\n        <span class="item-priority">${a}: ${n+1}</span>\n    `,s}function l(e){e.target.classList.add("dragging"),e.dataTransfer.setData("text/plain",e.target.dataset.id)}function m(e){e.target.classList.remove("dragging")}function c(e){e.preventDefault()}function A(e){e.preventDefault(),e.target.closest(".layout-items").classList.add("layout-drop-zone")}function d(e){e.target.closest(".layout-items").contains(e.relatedTarget)||e.target.closest(".layout-items").classList.remove("layout-drop-zone")}function u(e){e.preventDefault();const t=e.target.closest(".layout-items");t.classList.remove("layout-drop-zone");const n=e.dataTransfer.getData("text/plain"),r=document.querySelector(`[data-id="${n}"]`),s=e.target.closest(".layout-item")||t;r&&s!==r&&(s.classList.contains("layout-item")?s.parentNode.insertBefore(r,s):t.appendChild(r))}function p(){const e=function(){const e=Array.from(document.getElementById("left-layout-items").children),t=Array.from(document.getElementById("right-layout-items").children);return{leftColumn:e.map((e,t)=>({id:e.dataset.id,name:e.dataset.name||e.querySelector(".item-name").textContent,priority:t+1})),rightColumn:t.map((e,t)=>({id:e.dataset.id,name:e.dataset.name||e.querySelector(".item-name").textContent,priority:t+1}))}}();t().storage.local.set({layout_config:e}).then(()=>{alert("布局配置已保存")}).catch(e=>{console.error("保存布局配置失败:",e),alert("保存失败")})}function f(){confirm("确定要恢复默认布局吗？")&&(g(r),t().storage.local.set({layout_config:r}).then(()=>{alert("已恢复默认布局")}).catch(e=>{console.error("恢复默认布局失败:",e),alert("恢复失败")}))}!function(){const e=["Zhuye","Peizhi","Shouce","settingClearCache","settingClearLocalStorage","settingGlobalFloatingWindow","settingAutoTimeout","settingWebhook","settingWebhookUrl","settingWebhookMethod","settingWebhookArg","settingWebhookHeaders","settingDomainAllowList","settingSafe","settingVipSwitch","settingLayout","settingLayoutLeftArea","settingLayoutRightArea","settingLayoutPriority","settingAI","settingAIbaseURL","settingAIapiKey","settingAImodel","settingAISystemPrompt","settingAIUserPrompt","global_float","fetch_timeout","settingSafeMode","vipSwitch"];for(const t of e)try{o(t)}catch{}const n=document.getElementsByClassName("settingResetAndSave");for(const e of n)e.textContent=t().i18n.getMessage("settingResetAndSave");const r=document.getElementsByClassName("settingSave");for(const e of r)e.textContent=t().i18n.getMessage("settingSave");document.getElementById("allowlist").placeholder=t().i18n.getMessage("settingDomainAllowListTip")}(),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("manual-link");e&&e.addEventListener("click",function(e){e.preventDefault(),t().tabs.create({url:t().runtime.getURL("getstarted.html")})}),a()}),document.getElementById("save").onclick=function(){let e={};e.url=document.getElementById("url").value,e.method=document.getElementById("method").value,e.arg=document.getElementById("arg").value,e.headers=JSON.parse(document.getElementById("headers").value),t().storage.local.set({webhook_setting:e})},document.getElementById("reset").onclick=function(){document.getElementById("url").value="",document.getElementById("arg").value="",document.getElementById("headers").value="{}",t().storage.local.set({webhook_setting:{url:"",arg:"",headers:{}}})},document.getElementById("save_allowlist").onclick=function(){snsArr=document.getElementById("allowlist").value.split(/[(\r\n)\r\n]+/),snsArr.forEach((e,t)=>{e||snsArr.splice(t,1)}),t().storage.local.set({allowlist:snsArr})},document.getElementById("reset_allowlist").onclick=function(){document.getElementById("allowlist").value="",t().storage.local.set({allowlist:[]})},document.getElementById("save_AI").onclick=function(){let e={AIbaseURL:document.getElementById("AIbaseURL").value,AIapiKey:document.getElementById("AIapiKey").value,AImodel:document.getElementById("AImodel").value,AISystemPrompt:document.getElementById("AISystemPrompt").value,AIUserPrompt:document.getElementById("AIUserPrompt").value};t().storage.sync.set({AI:e})},document.getElementById("reset_AI").onclick=function(){document.getElementById("AIbaseURL").value="",document.getElementById("AIapiKey").value="",document.getElementById("AImodel").value="",document.getElementById("AISystemPrompt").value="",document.getElementById("AIUserPrompt").value="",t().storage.sync.set({AI:{AIbaseURL:"",AIapiKey:"",AImodel:"",AISystemPrompt:"",AIUserPrompt:""}})},document.getElementById("settingClearLocalStorage").onclick=function(){t().storage.local.get(null).then(function(e){const n=Object.keys(e).filter(e=>e.startsWith("findsomething_result"));return t().storage.local.remove(n)}).then(function(){alert(t().i18n.getMessage("settingClearComplete"))}).catch(function(e){console.error("Storage error:",e)})},document.getElementById("global_float").onclick=function(){t().storage.local.get(["global_float"]).then(function(e){return t().storage.local.set({global_float:1!=e.global_float})}).then(function(){return t().storage.local.get(["global_float"])}).then(function(e){document.getElementById("global_float").textContent=1==e.global_float?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)})},document.getElementById("fetch_timeout").onclick=function(){t().storage.local.get(["fetch_timeout"]).then(function(e){return t().storage.local.set({fetch_timeout:1!=e.fetch_timeout})}).then(function(){return t().storage.local.get(["fetch_timeout"])}).then(function(e){document.getElementById("fetch_timeout").textContent=1==e.fetch_timeout?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)})},document.getElementById("settingSafeMode").onclick=function(){t().storage.local.get(["settingSafeMode"]).then(function(e){return t().storage.local.set({settingSafeMode:1!=e.settingSafeMode})}).then(function(){return t().storage.local.get(["settingSafeMode"])}).then(function(e){document.getElementById("settingSafeMode").textContent=1==e.settingSafeMode?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)})},document.getElementById("vipSwitch").onclick=function(){t().storage.local.get(["vipSwitch"]).then(function(e){return t().storage.local.set({vipSwitch:1!=e.vipSwitch})}).then(function(){return t().storage.local.get(["vipSwitch"])}).then(function(e){document.getElementById("vipSwitch").textContent=1==e.vipSwitch?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)})},t().storage.local.get(["webhook_setting"]).then(function(e){e&&e!={}&&e.webhook_setting&&(document.getElementById("url").value=e.webhook_setting.url,document.getElementById("method").value=e.webhook_setting.method,document.getElementById("arg").value=e.webhook_setting.arg,document.getElementById("headers").value=JSON.stringify(e.webhook_setting.headers))}).catch(function(e){console.error("Storage error:",e)}),t().storage.local.get(["global_float"]).then(function(e){document.getElementById("global_float").textContent=1==e.global_float?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)}),t().storage.local.get(["fetch_timeout"]).then(function(e){document.getElementById("fetch_timeout").textContent=1==e.fetch_timeout?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed")}).catch(function(e){console.error("Storage error:",e)}),t().storage.local.get(["settingSafeMode"]).then(function(e){if(document.getElementById("settingSafeMode").textContent=1==e.settingSafeMode?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed"),null==e.settingSafeMode)return t().storage.local.set({settingSafeMode:!0})}).then(function(){return t().storage.local.get(["settingSafeMode"])}).then(function(e){null==e.settingSafeMode&&(document.getElementById("settingSafeMode").textContent=t().i18n.getMessage("settingOpened"))}).catch(function(e){console.error("Storage error:",e)}),t().storage.local.get(["vipSwitch"]).then(function(e){if(document.getElementById("vipSwitch").textContent=1==e.vipSwitch?t().i18n.getMessage("settingOpened"):t().i18n.getMessage("settingClosed"),null==e.vipSwitch)return t().storage.local.set({vipSwitch:!0})}).then(function(){return t().storage.local.get(["vipSwitch"])}).then(function(e){null==e.vipSwitch&&(document.getElementById("vipSwitch").textContent=t().i18n.getMessage("settingOpened"))}).catch(function(e){console.error("Storage error:",e)}),t().storage.local.get(["allowlist"]).then(function(e){e&&e.allowlist&&(document.getElementById("allowlist").textContent=e.allowlist.join("\n"))}).catch(function(e){console.error("Storage error:",e)}),t().storage.sync.get(["AI"]).then(function(e){e&&e.AI?(document.getElementById("AIbaseURL").value=e.AI.AIbaseURL,document.getElementById("AIapiKey").value=e.AI.AIapiKey,document.getElementById("AImodel").value=e.AI.AImodel,document.getElementById("AISystemPrompt").value=e.AI.AISystemPrompt||s.AISystemPrompt,document.getElementById("AIUserPrompt").value=e.AI.AIUserPrompt||s.AIUserPrompt):(document.getElementById("AIbaseURL").value=s.AIbaseURL,document.getElementById("AIapiKey").value=s.AIapiKey,document.getElementById("AImodel").value=s.AImodel,document.getElementById("AISystemPrompt").value=s.AISystemPrompt,document.getElementById("AIUserPrompt").value=s.AIUserPrompt)}).catch(function(e){console.error("Storage error:",e)})})()})();